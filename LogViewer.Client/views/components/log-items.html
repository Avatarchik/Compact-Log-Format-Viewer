<div class="card">
    <div class="card-body">
        <h5 class="card-title">Logs</h5>

        <div>
            <input ng-model="vm.logOptions.filterExpression" class="form-control form-control-lg" type="text" placeholder="Search logs&hellip;"/>
            <button ng-click="vm.search(vm.logOptions)">Search</button>
        </div>

        <!-- No Results -->
        <div ng-show="vm.logitems.totalItems === 0" class="text-center">
            No Results
        </div>

        <table class="table" ng-show="vm.logitems.totalItems > 0">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Timestamp</th>
                    <th scope="col">Level</th>
                    <th scope="col">Message</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat-start="log in vm.logitems.items" ng-click="log.open = !log.open" >
                    <td>{{ log.timestamp | date:'medium' }}</td>
                    <td><span>{{ log.level }}</span></td>
                    <td>{{ log.renderedMessage }}</td>
                </tr>
                <tr ng-repeat-end="" ng-if="log.open">
                    <td colspan="3">

                        <div ng-if="log.exception">
                            <h3 style="color:#fe6561;">Exception</h3>
                            <p style="white-space: pre-wrap;">{{ log.exception }}</p>
                        </div>

                        <h3>Properties</h3>
                        <table class="table">
                            <tbody>
                                <tr>
                                    <th>Timestamp</th>
                                    <td>{{ log.timestamp }}</td>
                                </tr>
                                <tr>
                                    <th>@MessageTemplate</th>
                                    <td>{{ log.messageTemplateText }}</td>
                                </tr>
                                <tr ng-repeat="(key, val) in log.properties">
                                    <th>{{key}}</th>
                                    <td ng-switch on="key">
                                        <a ng-switch-when="HttpRequestNumber" ng-click="vm.findItem(key, val.value)" title="Find Logs with Request ID" class="btn btn-primary">{{val.value}}</a>
                                        <a ng-switch-when="SourceContext" ng-click="vm.findItem(key, val.value)" title="Find Logs with Namespace" class="btn btn-primary">{{val.value}}</a>
                                        <a ng-switch-when="MachineName" ng-click="vm.findItem(key, val.value)" title="Find Logs with Machine Name" class="btn btn-primary">{{val.value}}</a>
                                        <a ng-switch-when="RequestUrl" href="{{val.value}}" target="_blank" rel="noopener" title="Open">{{val.value}}</a>
                                        <span ng-switch-default>{{val.value}}</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>

            </tbody>
        </table>

        <!-- Pagination -->
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                </li>
                <li class="page-item"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item">
                    <a class="page-link" href="#">Next</a>
                </li>
            </ul>
        </nav>

    </div>
</div>